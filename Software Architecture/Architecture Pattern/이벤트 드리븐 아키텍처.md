# EDA (이벤트 드리븐 아키텍처)
* 분산된 시스템에서 이벤트를 생성(발행)하고 발행된 이벤트를 수신자에게 전송하는 구조로 수신자는 그 이벤트를 처리하는 방식의 아키텍처이다.
* 분산 아키텍처 환경에서 **상호간 결합도를 낮추기 위해 비동기 방식으로 메시지를 전달하는 패턴**으로 주로 **Message Broker** `(Kafka, RabbitMQ)`와 결합하여 구성된다.
### EDA의 구성요소
1. **Event Generator**
    * 시스템 내 외부의 상태 변화를 감지하여 표준화된 형식의 이벤트를 생성
2. **Event Channel**
    * 이벤트를 필요로 하는 시스템까지 발송
3. **Event Processing Engine**
    * 수신한 이벤트를 식별, 적절한 처리 수행
    * 때에 따라 이벤트 처리의 결과로 또 다른 이벤트를 발생시킬 수 있음
### Event Processing Style
1. **Simple event processing**
    * 각각의 이벤트가 직접적으로 수행해야 할 action과 매핑되어 처리됨
    * 실시간으로 작업의 흐름을 처리할 때 사용되며, 이벤트 처리 시간과 비용의 손실이 적음
2. **Event stream processing**
    * 이벤트를 중요도에 따라 필터링하여 걸러진 이벤트만을 수신자에게 전송
    * 실시간으로 정보의 흐름을 처리할 때 사용되며, 기업에 적용될 경우 신속한 의사 결정을 가능하게 함
3. **Complex event processing**
    * 일상적인 이벤트의 패턴을 감지하여 더 복잡한 이벤트의 발생을 추론하는 것
    * '주식의 등락'이라는 일상적인 이벤트의 패턴을 감지하여 '투자 적기'라는 상위의 이벤트를 추론해 낼 수 있음
### EDA의 장단점
#### 장점
* Decoupling
    * 시스템 간의 느슨한 결합이 가능하므로 분산 시스템, Microservice 환경에서 시스템 간 의존성을 배제할 수 있다.
    * 시스템은 Event Channel인 Message Broker에 대한 의존성만 가진다.
* 다른 시스템의 정보를 알 필요가 없다.
    * 약속된 Event message를 가지고 상호 정보를 교환한다.
* Micro Service 단위로 시스템을 분리하기 쉽게 때문에 확장성, 탄력성을 고려하기 쉽다.
#### 단점
* Broker Dependency
    * Event를 전송하기 위한 Message Broker에 대한 의존성이 커지기 때문에 Message Broker의 장애 시 전체 장애로 이어질 수 있다.
* Transaction 단위가 격리되기 때문에 서비스 장애 발생 시 retry/rollback을 고려해야 한다.
* 시스템 전체 Flow를 파악하기 어려울 수 있다. 
    * 명확한 Flow를 확인하기 위해서는 시스템을 모니터링해야 한다.
* 디버깅이 어렵다.

