# DB 트랜잭션 (Transaction)
### 트랜잭션이란?
* 트랜잭션이란 데이터베이스의 상태를 변환하는 **하나의 논리적 기능을 수행하기 위한 작업의 단위** 또는 **한번에 모두 수행되어야 할 일련의 연산들**을 의미
  * 작업의 단위 : SQL 명령문들을 사람이 정하는 기준에 따라 정하는 것
```
예시) 사용자 A의 계좌에서 사용자 B의 계좌로 만 원을 송금한다.

 1. 사용자 A의 계좌에서 만 원을 차감한다. (출금 UPDATE)
 2. 사용자 B의 계좌에서 만 원을 추가한다. (입금 UPDATE)
```
### 트랜잭션 특징
1. 트래잭션은 데이터베이스 시스템에서 병행 제어 및 회복 작업 시 처리되는 작업의 논리적 단위이다.
2. 사용자가 시스템에 대한 서비스 요구 시 시스템이 응답하기 위한 상태 변환 과정의 단위이다.
3. 하나의 트랜잭션은 Commit되거나 Rollback 된다.
### 트랜잭션 성질
#### Atomicity (원자성)
* 트랜잭션의 연산은 데이터베이스에 모두 반영되던지,  전혀 반영되지 않아야 한다.
* 트랜잭션 내의 모든 명령은 반드시 완벽히 수행되어야 하며, 모두가 완벽히 수행되지 않고 어느 하나라도 오류가 발생하면 트랜잭션 모두가 취소되어야 한다.
#### Consistency (일관성)
* 트랜잭션이 실행을 성공적으로 완료하면 언제나 일관성 있는 데이터베이스 상태로 변환한다.
* 시스템이 가지고 있는 고정요소는 트랜잭션 수행 전과 수행 후의 상태가 같아야 한다. 
#### Isolation (독립성)
* 둘 이상의 트랜잭션이 동시에 병행 실행되는 경우 어느 하나의 트랜잭션 실행 중에 다른 트랜잭션의 연산이 끼어들 수 없다.
* 수행중인 트랜잭션은 완전히 완료될 때 까지 다른 트랜잭션에서 수행 결과를 참조할 수 없다.
#### Durability (영속성)
* 성공적으로 완료된 트랜잭션의 결과는 시스템이 고장나더라도 영구적으로 반영되어야 한다.
### 트랜잭션 연산 및 상태
#### Commit
* 한 개의 논리적 단위(트랜잭션)에 대해 작업이 성공적으로 끝났고 데이터베이스에 다시 일관된 상태에 있을 때, 해당 트랜잭션이 수행한 연산이 완료된 것을 알려주는 연산
#### Rollback
* 하나의 트랜잭션 처리가 비정상적으로 종료되어 데이터베이스의 일관성을 깨뜨렸을 때, 해당 트랜잭션의 일부가 정상적으로 처리되었더라도 트랜잭션의 원자성을 구현하기 위해 수행한 모든 연산을 취소하는 연산
* Rollback 시 해당 트랜잭션을 재시작하거나 모두 폐기
### 트랜잭션의 상태
#### 활동 (Active)
* 트랜잭션이 실행중인 상태
#### 실패 (Failed)
* 트랜잭션 실행에 오류가 발생하여 중단된 상태
#### 철회 (Aborted)
* 트랜잭션이 비정상적으로 종료되어 Rollback 연산을 수행한 상태
#### 부분 완료 (Partially Committed)
* 트랜잭션의 마지막 연산까지 실행했지만, Commit 연산이 실행되기 직전의 상태
#### 완료 (Committed)
* 트랜잭션이 성공적으로 종료되어 Commit 연산을 실행한 후의 상태
