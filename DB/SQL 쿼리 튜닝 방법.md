# SQL 쿼리 튜닝 방법
* SQL 쿼리는 데이터베이스에서 데이터를 추출하거나 조작하는 데 사용된다.
* 하지만 대용량 데이터나 복잡한 쿼리의 경우 성능이 저하될 수 있다.
* 이러한 문제를 해결하기 위해 SQL 쿼리를 튜닝할 필요

### 적절한 JOIN 사용
* JOIN은 데이터베이스 성능에 부정적인 영향을 미칠 수 있다. 이를 방지하기 위해 적절한 JOIN을 사용하는 것이 중요하다.
* `INNER JOIN`은 모든 행이 일치하는 경우에만 검색하므로 성능이 뛰어나며, `OUTER JOIN`은 일치하지 않는 행도 검색할 수 있지만 `INNER JOIN`보다 성능이 떨어질 수 있다.
* JOIN의 순서를 조정하여 성능을 최적화할 수도 있다.

### 서브쿼리 최소화
* 서브쿼리는 복잡한 쿼리를 작성할 때 유용하지만, 성능 저하의 원인이 될 수 있다.
* 서브쿼리를 사용할 떄는 최소화하는 것이 좋다.
* 서브쿼리 대신 `JOIN`, `UNION`, `EXISTS` 등의 방법을 사용해서 쿼리를 작성하는 것이 좋다.
* 서브쿼리를 사용할 때는 서브쿼리의 결과를 캐시하여 재사용하는 것이 좋다.

### 인덱스 사용하기
* 인덱스는 대용량 데이터베이스에서 데이터 검색 속도를 향상시키는 데 매우 유용하다.
* 인덱스를 사용하면 데이터베이스가 특정 열의 데이터를 쉽게 찾을 수 있어, 적절한 인덱스를 만들어 쿼리의 실행 속도를 높이는 것이 중요하다.
* 인덱스는 자주 조회되는 컬럼에 대해서 생성해주는 것이 좋다.
* 인덱스 생성 시 데이터베이스의 크기와 인덱스 크기를 고려하여 적절한 크기의 인덱스를 생성하는 것이 중요하다.

### 쿼리 실행 계획 확인
* 쿼리 실행 계획은 데이터베이스가 쿼리를 실행할 때 어떤 방식으로 데이터를 검색하는지 알려준다.
  * 쿼리가 어떤 인덱스를 사용하는지, 어떤 테이블을 스캔하는지 등의 정보를 확인할 수 있다.
* 쿼리 실행 계획을 확인하여 쿼리의 성능을 분석하는 것이 중요하다.
* 쿼리 실행 계획을 분석하여 성능 저하의 원인을 파악하고 인덱스나 JOIN 조건 등을 수정하여 성능을 개선한다.
* 대부분의 데이터베이스 관리 시스템에서 쿼리 실행 계획을 확인할 수 있으며, 각 데이터베이스 관리 시스템마다 확인하는 방법이 다르다.

* 예) Mysql 에서는 `EXPLAIN` 키워드를 사용하여 쿼리 실행 계획을 확인할 수 있다.
```mysql
EXPLAIN SELECT *
FROM Order
WHERE order_date > '2024-06-13'
```

### 쿼리 성능 모니터링
* 쿼리 성능 모니터링을 통해 어떤 쿼리가 가장 많은 시간을 소모하는지, 어떤 쿼리가 자주 실행되는지 등을 파악하여 쿼리 성능 향상을 위한 대책을 세울 수 있다.
* 데이터베이스 관리 시스템에서 제공하는 모니터링 툴을 사용하거나, 쿼리 로그를 분석하여 모니터링할 수 있다.
