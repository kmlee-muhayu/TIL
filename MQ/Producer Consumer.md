# Producer-Consumer (생산자-소비자 패턴)
![producer-consumer](https://miro.medium.com/max/786/1*WEqED8Oq7Fo71PAr9KFAPQ.png)
* 멀티 스레드 환경에서 자주 사용하는 패턴
* 작업 목록을 가운데 두고 작업을 **생산해내는 주체**와 작업을 **처리하는 주체**를 **분리**시킨 설계 방법
* 작업을 생산하는 부분과 처리하는 부분이 **각각 감당할 수 있는 부하를 조절할 수 있다는 장점**이 있음
* Producer(생산자)는 작업을 새로 만들어 큐에 쌓아놓고, Consumer(소비자)는 (Blocking Queue; 블락킹 큐)큐에 쌓여 있는 작업을 가져와 처리하는 구조
    * 여기서 여러 개의 Producer 와 Consumer 들이 각각 동일한 작업을 수행하는 여러 개의 스레드 또는 프로세스로 구성이 되므로 병렬처리가 되는 것
### Blocking Queue란?
* Consumer가 감당할 수 있는 것보다 많은 양의 작업을 만들게 되면 큐에서는 계속해서 작업이 큐에 누적되는데, 이는 메모리 오류를 발생시킬 수 있다.
* 하지만, 큐의 크기에 제한을 두면 큐에 빈 공간이 생길 때까지 작업을 추가하지 않고 대기하도록 구현하여 메모리 오류를 막을 수 있다.
* 큐에 작업이 없을 경우엔 Consumer가 큐의 작업이 추가될 때까지 대기하여 불필요한 연산을 하지 않도록 구현한다.
* 위 역할을 하는 것이 **Blocking Queue** 이다.
    * 결국 Producer 가 작업을 빨리 처리하거나, Consumer 가 작업을 빨리 처리하는 경우에서의 **오류를 피할 수 있게 해주고**, 
    * **작업에 대한 스레드 간의 동기화 작업량을 조절**해주어 **Thread-Safe**하게 프로그램을 만들어 낼 수 있게 해줌

