# 좋은 API Response Body
* **API 역시 사용자 인터페이스**이므로, 인터페이스란 측면을 무시하고 내가 편한 방법이나 기준 없이 Response Body를 만들면 사용해야 하는 쪽에서 불편할 때가 많다.
* 정답이 있는 주제는 아니지만, 대체로 선호되는 Response Body 규칙 및 기준을 알아본다.

### 최소 스펙 유지하기 (YAGNI)
* 가능한 API **크기를 최소화**한다.
  * API에 신규 필드를 추가하는 것은 어렵지 않다. 하지만 **이미 존재하는 필드를 수정/삭제하는 건 너무나 어렵다.**
  * API를 만들 때는 현재 필요한 것들만 포함시킨다.
  * 사용하지 않는 필드가 확실하다면 해당 필드는 꼭 삭제한다.

### CamelCase 사용하기
* 많은 언어에서 CamelCase를 관례처럼 사용하고 있기 때문에, Response Body 필드들 역서 CamelCase를 사용하면 **다양한 플랫폼 언어에서 일관성을 유지할 수 있다.**

```json
// Bad
{
  "group_id": 1,
  "group_name": 'Example Group'
}

// Good
{
  "groupId": 1,
  "groupName": 'Example Group'
}
```

### 표준 포맷 사용하기
* API 데이터는 누가 봐도 직관적으로 **어떤 데이터인지 이해할 수 있는 형태**여야 한다.

```json
// Bad
{
  "createdAt": 1423314000
}

// Good
{
  "createdAt": '2024-05-31 11:18:00'
}
```

### Boolean 타입에 null은 사용하지 않는다.
* 기본적으로 Boolean은 **참과 거짓** 두 값의 열거형이다.
* **의미가 있는 null이 있는 경우라면 Enum 으로 대체**하는 것이 좋다.
  * 예를 들어, null, 참, 거짓에 각각 의미가 있다면 `YES`, `NO`, `UNKNOWN`으로 표현하는 것이 좋다.

### 제한된 문자열 값은 열거형으로 표현한다.
* `ADMIN`, `MANAGER`, `USER`와 같이 제한된 문자열 값이 있는 경우 Enum으로 표현하는 것이 좋다.
* API 문서에서 제한된 값 외에는 없음을 표현해야 한다.

### 열거형은 문자열로 표현되어야 한다.
* Enum은 기본적으로 ordinal 값을 가지고 있으며, ordinal은 숫자값이다.
* ordinal은 Enum의 순서를 의미하며, Enum의 숫자가 바뀌면 ordinal 값도 바뀐다. 또한 **어떤 값을 의미하는지 명확하지 않다.**
* Enum을 사용할 때는 항상 문자열 값을 이용해서 API에서 반환한다.

```json
// Bad
{
  "readyStatus": 1
}

// Good
{
  "readyStatus": 'READY'
}
```

### 복수형 빈 값은 빈 배열로 표현한다.
* 흔히 사용하는 ORM을 보면 복수형을 조회할 때 값이 없으면 빈 배열을 사용한다.
  * 이로 인해 복수형 조회 시 null 또는 undefined 문제를 대응할 필요가 없어진다.

```json
// Bad
{
  "objects": null,
}

// Good
{
  "objects": [],
}
```

### 일관성 유지하기
* API 필드명은 **예측 가능해야 한다.**
* 같은 뜻을 나타내는 필드는 **이름에 일관성을 유지**해야 한다.

```json
// Bad
{
  "accountNumber": '00125181125129',
  "bankNo": '011'
}

// Good
{
  "accountNumber": '00125181125129',
  "bankNumber": '011'
}
```

### 필드명 축약 금지
* 필드명을 축약하지 않는다.
  * count → cnt
  * table → tbl
* 사용자 입장에서는 축약한 단어의 의미를 알기 어렵기 때문이다.
* 만약, 축약어 자체가 모두가 알고 있는 보편적인 단어라면 사용해도 괜찮다.
  * 예를 들어 id 는 identifier의 축약어로, 이미 모두가 그 뜻을 알고 있으므로 사용해도 된다.

### 타입에 맞는 필드명
* 필드가 표현하는 데이터 타입에 맞는 필드명을 사용한다.
* 적절한 필드명을 선언하지 않으면 **해당 값이 채워져 있을 때만 그 값의 의미를 알 수 있다.**
* API 문서를 찾아보지 않더라도 직관적으로 보자마자 알 수 있는 필드명을 사용해야 한다.

```json
// Bad
{
  "discount": true,
  "created": '2024-05-31 11:18:00',
  "order": [..]
}

// Good
{
  "isDiscounted": true,
  "createdAt": '2024-05-31 11:18:00',
  "orders": [..]
}
```
