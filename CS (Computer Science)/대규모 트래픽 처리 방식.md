# 대규모 트래픽 처리 방식
* 대형 서비스의 경우 사용자가 많은데 어떻게 안정적으로 서버를 운영하고 관리할 수 있는가?
### Scale Up
* 고성능 CPU, 메모리 확장, SSD 등 **서버의 스펙을 높이는** 수직 확장 방식
* **장점**
    * 구축 설계가 쉽다.
    * 여러 대의 서버에 데이터 일관성을 유지해야 하는 작업이 필요하지 않다.
    * 컨트롤러나 네트워크 비용이 별도로 발생하지 않는다.
* **단점**
    * 서버 한 대에 모든 부하가 집중되므로 장애 발생 시 치명적이다.
    * 용량, 성능 확장의 제한
    * 비용이 많이 든다.
* 온라인 금융 서비스처럼 **빠르고 정확하면서도 단순한 처리가 필요한 OLTP(Online Transaction Processing)** 환경에서는 고성능의 Scale Up 방식이 적합하다.
* 백업용 스토리지를 구축하는 데 있어 **향후 데이터 증가 폭이 미미하거나 규모가 작은 경우** Scale Up 방식이 경제적일 수 있다.
### Scale Out
* 비슷한 스펙의 서버를 **여러 대 증설**하여 **로드밸런싱을 통한 병렬처리**가 가능한 수평 스케일 업 아키텍처
* **장점**
	* 서버 한 대가 장애가 발생하더라도 다른 서버로 서비스 제공 가능
	* 지속적인 확장성
	* 분산 처리로 인한 장애 가능성이 낮아진다.
	* 하나의 시스템을 모니터링하기 쉬워 이슈 대응이 좋다.
	* Scale Up 방식에 비해 저렴하다.
* **단점**
	* 설계 관리가 복잡하다.
	* 관리 비용이 증가한다.
	* 모든 서버의 데이터 일관성을 유지해야 한다.
	* 아키텍처를 구성하는 개발자의 로드밸런싱 이해도 문제
	* 서버가 늘어남에 따라 자연스럽게 발생하는 I/O로 인한 지연 문제
* **빅데이터의 데이터마이닝이나 검색엔진 데이터 분석 처리 등을 대표하는 OLAP(Online Analytical Processing)** 애플리케이션 환경에서는 대량의 데이터 처리와 복잡한 쿼리가 이루어지기 때문에 Scale Out 구성이 더 효율적이라고 할 수 있다.
### 로드밸런싱 기법
* 서버의 능력을 고려하여 분배해야 하기 때문에 서버의 상황에 맞춰 적절한 기법으로 선택해야 한다.
1. **라운드로빈 기법 (Round Robin Method)**
    * 서버에 들어온 요청을 **순서대로** 돌아가며 배정하는 방식
    * 클라이언트의 요청을 순서대로 분배하기 때문에 여러 대의 서버가 동일한 스펙을 갖고 있고, 서버와의 연결(세션)이 오래 지속되지 않는 경우에 활용하기 적합하다.
2. **가중 라운드로빈 기법 (Weighted Round Robin Method)**
    * 각각의 서버마다 가중치를 매기고 **가중치가 높은 서버에 클라이언트 요청을 우선적으로 배분**하는 방식
    * 주로 서버의 트래픽 처리 능력이 **상이**한 경우 사용되는 부하 분산 방식
3. **IP 해시 방식 (IP Hash Method)**
    * 클라이언트의 **IP 주소를 특정 서버로 매핑**하여 요청을 처리하는 방식
    * 사용자의 IP를 해싱하여 로드를 분배하기 때문에 사용자가 항상 동일한 서버로 연결되는 것을 보장한다.
4. **최소 연결 방식 (Least Connection Method)**
    * 요청이 들어온 시점에 **가장 적은 연결상태**를 보이는 서버에 우선적으로 트래픽을 배분하는 방식
    * 자주 세션이 길어지거나, 서버에 분배된 트래픽들이 일정하지 않은 경우에 적합하다.
5. **최소 응답 시간 방식 (Least Response Time Method)**
    * 서버의 **현재 연결 상태**와 **응답시간**(Response Time; 서버에 요청을 보내고 최초 응답을 받을 때까지 소요되는 시간)을 모두 고려하여 트래픽을 배분하는 방식
    * **가장 적은 연결 상태**와 **가장 짧은 응답시간**을 보이는 서버에 우선적으로 로드 배분

