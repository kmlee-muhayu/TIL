# 웹상에서의 보안 공격
### 1. XSS (Cross Site Scripting)
* 공격자가 사이트에 스크립트를 넣는 공격 기법
* 보통 의도치 않은 행동을 수행시키거나 사용자의 세션을 가로채 개인 정보를 탈취하는 공격 기법
* 주로 자바스크립트를 사용하여 공격하는 경우가 많음
* **방어책**
  * 필터 사용
    * 예) `<`, `>` 기호를 각각 `&lt;`, `&gt;`와 같이 HTML 문자로 바꾸어 HTML 코드가 아닌 단순 문자로 인식하게 하는 필터링 기법
  * 쿠키의 보안 옵션
    * 쿠키의 secure 옵션을 이용하여 SSL 커넥션일 경우에만 쿠키를 보냄
    * 쿠키의 HttpOnly 옵션을 이용하여 브라우저에서 쿠키를 접근할 수 없게 함
  * CSP(콘텐츠 보안 정책) 사용
    * 스크립트 실행 정책을 사용하여 출처가 자기 서버인 스크립트만 실행할 수 있도록 설정하는 방법
### 2. CSRF Attack
* Cross-site Request Forgery. 공격자가 서비스 사용자를 이용하여 요청을 보내는 공격
* 사용자가 자신의 의지와는 무관하게 공격자가 의도한 행동을 하는 보안 공격방법
  * 예) 공격 코드가 포함된 이메일을 관리자에게 보내 관리자 권한을 탈취했던 사례
* **방어책**
  * Referer Check
    * HTTP 헤더는 referer (사용자가 현재 링크를 타고 온 근원 페이지) 를 가지고 있는데, 이를 확인하여 허용된 referer의 요청만 허락하도록 설정하는 방법
    * 단, 변조 프로그램으로 쉽게 조작이 가능하여 권장하지는 않는 방법
  * CSRF token
    * 모든 요청에 토큰을 함께 전달하여 서버에서 검증하는 방어 방법
    * 유효한 토큰을 서버로 전달하지 않으면 요청이 허락되지 않음
  * CAPTCHA
    * 캡챠의 인증코드를 입력하게 하여 사용자가 정말 변경을 의도하는 경우에만 요청하도록 유도
    * 예) reCAPTCHA - I'm not a robot
### 3. Command Injection
* 쉘을 실행시키는 로직을 이용한 공격
* 웹 애플리케이션 내에서 시스템 명령어를 실행하는 상황에서 시스템 명령어의 일부분을 전달하는 방식의 공격
* **방어책**
  * 쉘 명령어를 실행시키는 시스템 함수를 사용하지 않도록 함
  * `|`, `&`, `;`, `>`, `<` 와 같은 민감한 문자 필터링
### 4. File Upload Attack
* 웹의 업로드 기능을 이용하여 공격 스크립트가 담긴 파일을 서버로 업로드하는 공격
* 코드가 담긴 파일을 업로드하고 해커가 url을 통해 접근 가능해지면 Command Injection과 같은 효과를 볼 수 있는 공격
* 서버 자체를 다운시키기 위해 대용량 파일을 업로드 할 수 있음
* **방어책**
  * 파일 타입을 검사하여 허락된 타입만 저장
  * 업로드할 파일의 크기 제한
  * 해커가 파일을 찾을 수 없도록 업로드 파일의 이름과 확장자를 난수화하여 저장
  * 특수 문자가 포함된 경우 업로드를 막음 (Null byte Injection 방지)

